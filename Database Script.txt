DROP DATABASE TestJPA;
CREATE DATABASE TestJPA;

USE TestJPA;

CREATE TABLE Customer(
	custID VARCHAR(6) NOT NULL,
	custName VARCHAR(30) NOT NULL,
	CustAddress VARCHAR(30),
	CONSTRAINT PRIMARY KEY (custID)
);

CREATE TABLE Orders(
	orderID VARCHAR(6) NOT NULL,
	orderDate DATE,
	totalAmount DECIMAL(6,2) NOT NULL,
	custID VARCHAR(6) NOT NULL,
	CONSTRAINT PRIMARY KEY (OrderID),
	CONSTRAINT FOREIGN KEY(CustID) REFERENCES Customer(CustID)
	ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Item(
	code VARCHAR(6) NOT NULL,
	description VARCHAR(50) NOT NULL,
	UnitPrice DECIMAL(6,2) NOT NULL,
	QtyOnHand INT(5) NOT NULL,
	CONSTRAINT PRIMARY KEY (code)
);

CREATE TABLE OrderDetail(
	orderID VARCHAR(6) NOT NULL,
	code VARCHAR(6) NOT NULL,
	orderQTY INT(11) NOT NULL,
	amount DECIMAL(6,2) NOT NULL,
	CONSTRAINT PRIMARY KEY (orderID,code),
	CONSTRAINT FOREIGN KEY (orderID) REFERENCES Orders(orderID)
	ON UPDATE CASCADE ON DELETE CASCADE,
	CONSTRAINT FOREIGN KEY (code) REFERENCES Item(code)
	ON UPDATE CASCADE ON DELETE CASCADE
);
